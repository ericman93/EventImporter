function show_calendar(){$("#calendar").html(""),$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},events:"/events/"+user_name,eventBorderColor:"black",loading:function(e){e?popupLoading():(closeLoading(),show_all_proposals())},eventRender:function(e){add_button(e.id,"approve",approve_option)},defaultView:"agendaWeek"})}function show_all_proposals(){$.each(proposels,function(e,o){var n={title:"Proposel",start:new Date(o.start_time),allDay:!1,id:"prop-"+o.id,end:new Date(o.end_time),className:event_colors[e%event_colors.length]+"-event prop-"+o.id};$("#calendar").fullCalendar("renderEvent",n)})}function approve_option(e){remove_other_options(e),send_option_selection(e)}function remove_other_options(e){proposal_id=Number(e.substring(5));var o=proposels.filter(function(e){return e.id!=proposal_id});$.each(o,function(e,o){$("#calendar").fullCalendar("removeEvents","prop-"+o.id)})}function proposal_selected(e){var o=proposels.filter(function(o){return o.id==e});o=o[0];var n=new Date(o.start_time);$("#calendar").fullCalendar("gotoDate",n)}var current_proposel=0;$(function(){get_partial_data("user/"+request_id,"#request_data","get",show_calendar)});